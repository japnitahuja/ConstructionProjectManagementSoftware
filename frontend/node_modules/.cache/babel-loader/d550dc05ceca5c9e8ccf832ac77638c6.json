{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lenovo\\\\Desktop\\\\GitHub\\\\myles-website\\\\frontend\\\\src\\\\components\\\\gantt-chart\\\\gantt-chart.component.jsx\";\nimport React, { Component } from 'react';\nimport { gantt } from 'dhtmlx-gantt';\nimport 'dhtmlx-gantt/codebase/dhtmlxgantt.css';\nimport { selectCurrentProjectTasks } from '../../redux/current-project/current-project.selectors';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport { updateCurrentTaskStart } from '../../redux/current-task/current-task.actions';\nimport { updateTask } from '../../redux/current-task/current-task.sagas';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass GanttChart extends Component {\n  constructor(props) {\n    super(props);\n    this.dataProcessor = null;\n  }\n\n  componentDidMount() {\n    //gantt.config.column.width = 10;\n    gantt.config.drag_links = false;\n    gantt.config.columns = [{\n      name: \"text\",\n      width: 10,\n      resize: true,\n      label: \"Task name\",\n      align: \"center\"\n    }];\n    gantt.config.drag_progress = false;\n    const {\n      tasks\n    } = this.props;\n    console.log(tasks);\n    let data = {\n      data: []\n    };\n    tasks.forEach(task => {\n      let temp = {};\n      temp.id = task._id;\n      temp.text = task.taskName;\n      var startDate = new Date(task.taskStartDate);\n      var endDate = new Date(task.taskEndDate);\n      temp.start_date = startDate.getDate() + \"-\" + (startDate.getMonth() + 1) + \"-\" + startDate.getFullYear();\n      var Difference_In_Time = endDate.getTime() - startDate.getTime();\n      temp.duration = Difference_In_Time / (1000 * 3600 * 24);\n      temp.progress = task.completionPercentage;\n      data.data.push(temp);\n    });\n    console.log(\"data\", data);\n    gantt.init(this.ganttContainer);\n    this.initGanttDataProcessor();\n    gantt.clearAll();\n    gantt.parse(data);\n  }\n\n  initGanttDataProcessor(props) {\n    /**\r\n     * type: \"task\"|\"link\"\r\n     * action: \"create\"|\"update\"|\"delete\"\r\n     * item: data object object\r\n     */\n    const onDataUpdated = this.props.onDataUpdated;\n    this.dataProcessor = gantt.createDataProcessor((type, action, item, id) => {\n      console.log(type, action, item, id);\n      let temp = {};\n      temp.taskId = id;\n      temp.taskName = item.text;\n      var startDate = new Date(task.taskStartDate);\n      temp.taskStartDate = item.start_date;\n      temp.taskEndDate = item.end_date;\n      console.log(temp);\n      this.props.updateTask(temp);\n    });\n  }\n\n  componentWillUnmount() {\n    if (this.dataProcessor) {\n      this.dataProcessor.destructor();\n      this.dataProcessor = null;\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: input => {\n        this.ganttContainer = input;\n      },\n      style: {\n        width: '100%',\n        height: '100vh'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 12\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = createStructuredSelector({\n  tasks: selectCurrentProjectTasks\n});\n\nconst mapDispatchToProps = dispatch => ({\n  updateTask: data => dispatch(updateCurrentTaskStart(data))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GanttChart);","map":{"version":3,"sources":["C:/Users/lenovo/Desktop/GitHub/myles-website/frontend/src/components/gantt-chart/gantt-chart.component.jsx"],"names":["React","Component","gantt","selectCurrentProjectTasks","connect","createStructuredSelector","updateCurrentTaskStart","updateTask","GanttChart","constructor","props","dataProcessor","componentDidMount","config","drag_links","columns","name","width","resize","label","align","drag_progress","tasks","console","log","data","forEach","task","temp","id","_id","text","taskName","startDate","Date","taskStartDate","endDate","taskEndDate","start_date","getDate","getMonth","getFullYear","Difference_In_Time","getTime","duration","progress","completionPercentage","push","init","ganttContainer","initGanttDataProcessor","clearAll","parse","onDataUpdated","createDataProcessor","type","action","item","taskId","end_date","componentWillUnmount","destructor","render","input","height","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { gantt } from 'dhtmlx-gantt';\r\nimport 'dhtmlx-gantt/codebase/dhtmlxgantt.css';\r\nimport { selectCurrentProjectTasks } from '../../redux/current-project/current-project.selectors';\r\nimport { connect } from 'react-redux';\r\nimport { createStructuredSelector } from 'reselect';\r\nimport { updateCurrentTaskStart } from '../../redux/current-task/current-task.actions';\r\nimport { updateTask } from '../../redux/current-task/current-task.sagas';\r\n \r\nclass GanttChart extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    dataProcessor = null;\r\n\r\n    componentDidMount() {\r\n        \r\n        //gantt.config.column.width = 10;\r\n        gantt.config.drag_links = false;\r\n        gantt.config.columns=[\r\n            {name:\"text\",width:10, resize:true, label:\"Task name\", align: \"center\"  }\r\n        ];\r\n        gantt.config.drag_progress = false;\r\n\r\n        const {tasks} = this.props;\r\n        console.log(tasks);\r\n        let data = {data:[]};\r\n\r\n        tasks.forEach(task => {\r\n            let temp = {};\r\n            temp.id = task._id;\r\n            temp.text = task.taskName;\r\n\r\n            var startDate = new Date(task.taskStartDate);\r\n            var endDate = new Date(task.taskEndDate);\r\n\r\n            temp.start_date = startDate.getDate() + \"-\" + (startDate.getMonth()+1) + \"-\" + startDate.getFullYear();\r\n\r\n            var Difference_In_Time = endDate.getTime() - startDate.getTime();\r\n            temp.duration = Difference_In_Time / (1000 * 3600 * 24);\r\n\r\n            temp.progress = task.completionPercentage;\r\n            \r\n            data.data.push(temp);\r\n        });\r\n\r\n        console.log(\"data\",data);\r\n\r\n        gantt.init(this.ganttContainer);\r\n        this.initGanttDataProcessor();\r\n        gantt.clearAll();\r\n        gantt.parse(data);\r\n        \r\n    }\r\n\r\n    initGanttDataProcessor(props) {\r\n        /**\r\n         * type: \"task\"|\"link\"\r\n         * action: \"create\"|\"update\"|\"delete\"\r\n         * item: data object object\r\n         */\r\n        const onDataUpdated = this.props.onDataUpdated;\r\n        \r\n        this.dataProcessor = gantt.createDataProcessor((type, action, item, id) => {\r\n          console.log(type, action, item, id);\r\n          let temp = {};\r\n          temp.taskId = id;\r\n          temp.taskName = item.text;\r\n          \r\n          var startDate = new Date(task.taskStartDate);\r\n          temp.taskStartDate = item.start_date;\r\n          temp.taskEndDate = item.end_date;\r\n\r\n          console.log(temp);\r\n          this.props.updateTask(temp);\r\n          \r\n        });\r\n      }\r\n\r\n    componentWillUnmount() {\r\n        if (this.dataProcessor) {\r\n            this.dataProcessor.destructor();\r\n            this.dataProcessor = null;\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n      \r\n       return (\r\n           <div\r\n                ref={ (input) => { this.ganttContainer = input } }\r\n                style={ { width: '100%', height: '100vh' } }\r\n            ></div>\r\n       );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n    tasks: selectCurrentProjectTasks\r\n  });\r\n  \r\nconst mapDispatchToProps = (dispatch) => ({\r\n    updateTask : (data) => dispatch(updateCurrentTaskStart(data))\r\n});\r\n  \r\n  \r\n  export default connect(mapStateToProps, mapDispatchToProps)(GanttChart);"]},"metadata":{},"sourceType":"module"}